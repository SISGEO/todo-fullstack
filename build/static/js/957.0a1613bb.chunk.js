"use strict";(self.webpackChunksisgeo=self.webpackChunksisgeo||[]).push([[957],{288:(e,t,s)=>{s.d(t,{C:()=>i});const a=[],n=[],r=[],i={async createProject(e){const t={...e,id:Math.random().toString()};return n.push(t),t},getProjects:async e=>n.filter((t=>t.companyId===e)),async updateProject(e,t){const s=n.findIndex((t=>t.id===e));if(-1===s)throw new Error("Projeto n\xe3o encontrado");return n[s]={...n[s],...t},n[s]},async createChecklist(e){const t={...e,id:Math.random().toString()};return a.push(t),t},getChecklists:async e=>a.filter((t=>t.projectId===e)),async updateChecklist(e,t){const s=a.findIndex((t=>t.id===e));if(-1===s)throw new Error("Checklist n\xe3o encontrado");return a[s]={...a[s],...t},a[s]},async updateChecklistItem(e,t,s){const n=a.find((t=>t.id===e));if(!n)throw new Error("Checklist n\xe3o encontrado");const r=n.items.findIndex((e=>e.id===t));if(-1===r)throw new Error("Item n\xe3o encontrado");return n.items[r]={...n.items[r],...s},n.items[r]},async createTemplate(e){const t={...e,id:Math.random().toString()};return r.push(t),t},getTemplates:async e=>r.filter((t=>t.companyId===e)),async getStats(e){const t=a.filter((t=>t.projectId===e));return{total:t.length,completed:t.filter((e=>"completed"===e.status)).length,pending:t.filter((e=>"pending"===e.status)).length,nonCompliant:t.filter((e=>"non_compliant"===e.status)).length}}}},957:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(43),n=s(66),r=s(288),i=s(969),c=s(579);const l=()=>{const{user:e}=(0,n.A)(),[t,s]=(0,a.useState)([]),[l,d]=(0,a.useState)(!0);(0,a.useEffect)((()=>{o()}),[]);const o=async()=>{try{const e=await r.C.getChecklists("1");s(e)}catch(e){i.oR.error("Erro ao carregar checklists")}finally{d(!1)}};return l?(0,c.jsx)("div",{children:"Carregando..."}):(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"sm:flex sm:items-center",children:(0,c.jsxs)("div",{className:"sm:flex-auto",children:[(0,c.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Checklists"}),(0,c.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Lista de todos os checklists do projeto"})]})}),(0,c.jsx)("div",{className:"mt-8 flow-root",children:(0,c.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,c.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,c.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Nome"}),(0,c.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,c.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Progresso"}),(0,c.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,c.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,c.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:e.name}),(0,c.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.status}),(0,c.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[Math.round(e.items.filter((e=>e.completed)).length/e.items.length*100),"%"]}),(0,c.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:(0,c.jsx)("button",{onClick:()=>{var t;return null===(t=document.getElementById(`checklist-${e.id}`))||void 0===t?void 0:t.classList.remove("hidden")},className:"text-indigo-600 hover:text-indigo-900",children:"Ver detalhes"})})]},e.id)))})]})})})})}),t.map((e=>(0,c.jsx)("div",{id:`checklist-${e.id}`,className:"hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsx)("h2",{className:"text-lg font-medium",children:e.name}),(0,c.jsxs)("button",{onClick:()=>{var t;return null===(t=document.getElementById(`checklist-${e.id}`))||void 0===t?void 0:t.classList.add("hidden")},className:"text-gray-400 hover:text-gray-500",children:[(0,c.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,c.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,c.jsx)("div",{className:"space-y-4",children:e.items.map((t=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",checked:t.completed,onChange:s=>(async(e,t,s)=>{try{await r.C.updateChecklistItem(e,t,{completed:s,completedAt:s?new Date:null}),i.oR.success("Item atualizado com sucesso!"),o()}catch(a){i.oR.error("Erro ao atualizar item")}})(e.id,t.id,s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,c.jsx)("span",{className:"ml-3 text-sm text-gray-900",children:t.description})]}),t.completed&&t.completedAt&&(0,c.jsxs)("span",{className:"text-xs text-gray-500",children:["Conclu\xeddo em"," ",new Date(t.completedAt).toLocaleDateString()]})]},t.id)))})]})},`modal-${e.id}`)))]})}}}]);
//# sourceMappingURL=957.0a1613bb.chunk.js.map