"use strict";(self.webpackChunksisgeo=self.webpackChunksisgeo||[]).push([[924],{288:(e,t,s)=>{s.d(t,{C:()=>a});const r=[],o=[],n=[],a={async createProject(e){const t={...e,id:Math.random().toString()};return o.push(t),t},getProjects:async e=>o.filter((t=>t.companyId===e)),async updateProject(e,t){const s=o.findIndex((t=>t.id===e));if(-1===s)throw new Error("Projeto n\xe3o encontrado");return o[s]={...o[s],...t},o[s]},async createChecklist(e){const t={...e,id:Math.random().toString()};return r.push(t),t},getChecklists:async e=>r.filter((t=>t.projectId===e)),async updateChecklist(e,t){const s=r.findIndex((t=>t.id===e));if(-1===s)throw new Error("Checklist n\xe3o encontrado");return r[s]={...r[s],...t},r[s]},async updateChecklistItem(e,t,s){const o=r.find((t=>t.id===e));if(!o)throw new Error("Checklist n\xe3o encontrado");const n=o.items.findIndex((e=>e.id===t));if(-1===n)throw new Error("Item n\xe3o encontrado");return o.items[n]={...o.items[n],...s},o.items[n]},async createTemplate(e){const t={...e,id:Math.random().toString()};return n.push(t),t},getTemplates:async e=>n.filter((t=>t.companyId===e)),async getStats(e){const t=r.filter((t=>t.projectId===e));return{total:t.length,completed:t.filter((e=>"completed"===e.status)).length,pending:t.filter((e=>"pending"===e.status)).length,nonCompliant:t.filter((e=>"non_compliant"===e.status)).length}}}},924:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var r=s(43),o=s(66),n=s(288),a=s(969),i=s(579);const d=()=>{const{user:e}=(0,o.A)(),[t,s]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[l,m]=(0,r.useState)({name:"",description:""});(0,r.useEffect)((()=>{x()}),[e]);const x=async()=>{try{if(null!==e&&void 0!==e&&e.companyId){const t=await n.C.getProjects(e.companyId);s(t)}}catch(t){a.oR.error("Erro ao carregar projetos")}finally{c(!1)}};return d?(0,i.jsx)("div",{children:"Carregando..."}):(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"sm:flex sm:items-center",children:[(0,i.jsxs)("div",{className:"sm:flex-auto",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Projetos"}),(0,i.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Lista de todos os projetos da sua empresa"})]}),(0,i.jsx)("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:(0,i.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",onClick:()=>{var e;return null===(e=document.getElementById("new-project-modal"))||void 0===e?void 0:e.classList.remove("hidden")},children:"Novo Projeto"})})]}),(0,i.jsx)("div",{className:"mt-8 flex flex-col",children:(0,i.jsx)("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,i.jsx)("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Nome"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Descri\xe7\xe3o"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Criado em"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:e.name}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.description}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.status}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]},e.id)))})]})})})})}),(0,i.jsx)("div",{id:"new-project-modal",className:"hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,i.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Novo Projeto"}),(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(null===e||void 0===e||!e.companyId)return void a.oR.error("Usu\xe1rio n\xe3o est\xe1 associado a uma empresa");await n.C.createProject({name:l.name,description:l.description,companyId:e.companyId,status:"active",createdAt:new Date,updatedAt:new Date}),m({name:"",description:""}),a.oR.success("Projeto criado com sucesso!"),x()}catch(s){a.oR.error("Erro ao criar projeto")}},children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,i.jsx)("input",{type:"text",id:"name",value:l.name,onChange:e=>m({...l,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),(0,i.jsx)("textarea",{id:"description",value:l.description,onChange:e=>m({...l,description:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",rows:3,required:!0})]})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=document.getElementById("new-project-modal"))||void 0===e?void 0:e.classList.add("hidden")},className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Cancelar"}),(0,i.jsx)("button",{type:"submit",className:"rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Criar"})]})]})]})})]})}}}]);
//# sourceMappingURL=924.558d9d47.chunk.js.map